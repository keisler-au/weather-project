(this["webpackJsonpweather-project"]=this["webpackJsonpweather-project"]||[]).push([[0],{20:function(e,t,r){},23:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(11),i=r.n(c),s=(r(20),r(2)),o=r(5),u=r(12),l=r(13),d=r(15),j=r(14);function h(e){var t,r=null===(t=document.getElementById("fahrenheit"))||void 0===t?void 0:t.checked;return e+("Temperature"===e&&r?" (\xb0F)":"Temperature"===e?" (\xb0C)":"Clouds"===e||"Humidity"===e?" (%)":"Wind"===e?" (kn)":"Rain"===e?" (mm)":"")}function f(e,t,r){var n={current:{},forecasted:{}};for(var a in e){var c=function(c){if(e[a][c]){var i=h(c);n[a][i]="current"===a?t.current[c]:r.map((function(e){return t.forecasted[e][c]}))}};for(var i in e[a])c(i)}return n}var b=r(4),p=r.n(b),m=r(8),O=r(3),x=[0,1,2,3,4,5,6,7],v={Temperature:"",Clouds:"",Humidity:"",Wind:"",Rain:"",Description:"",Sunrise:"",Sunset:"",deselectAll:""},y={location:{Timezone:""},current:Object(O.a)({Date:"",Time:""},v),forecasted:x.map((function(){return v}))},g={Temperature:!0,Clouds:!0,Humidity:!0,Wind:!0,Rain:!0,Description:!0,Sunrise:!0,Sunset:!0},C={current:Object(O.a)({Date:!0,Time:!0},g),forecasted:g};function D(){return S.apply(this,arguments)}function S(){return(S=Object(m.a)(p.a.mark((function e(){var t,r,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("city").value,r=document.getElementById("country").value,!t){e.next=13;break}return e.prev=2,e.next=5,T.requestApi(t,r,!0);case 5:return n=e.sent,a=T.requestApi(n[0].lat,n[0].lon),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(2),e.t0 instanceof TypeError?console.log("The city that was searched for has no associated weather data:",e.t0):console.error("An error occured in getWeatherData():",e.t0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var T={requestApi:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=r?"http://api.openweathermap.org/geo/1.0/direct?q=".concat(e,",").concat(t,"&appid=invalid_key"):"https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=minutely,alerts&units=metric&appid=invalid_key"),a=fetch(n).then((function(e){return e.json()})).catch((function(e){return console.error("An Error occured in requestApi:",e)}));return a}};function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.Temperature,n=t?Math.round(1.8*r+32):Math.round(5/9*(r-32)),a=Object(O.a)(Object(O.a)({},e),{},{Temperature:n});return a}function k(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new Date(1e3*e),n=t?r.toTimeString().substring(0,5):r.toDateString().substring(0,4)+r.toDateString().substring(8,11);return n}function E(e){try{var t=e.timezone,r=e.current,n=r.dt,a=r.temp,c=r.clouds,i=r.rain,o=r.wind_speed,u=r.humidity,l=Object(s.a)(r.weather,1)[0].description,d=r.sunrise,j=r.sunset,h=e.daily,f={location:{Timezone:t},current:{Date:k(n,!1),Time:k(n),Temperature:Math.round(a),Clouds:c,Humidity:u,Wind:Math.round(1.943844*o),Rain:"number"===typeof i?i:"-",Description:l[0].toUpperCase()+l.slice(1),Sunrise:k(d),Sunset:k(j)},forecasted:h.map((function(e){return{Date:k(e.dt,!1),Temperature:Math.round(e.temp.day),Clouds:e.clouds,Humidity:e.humidity,Wind:Math.round(1.943844*e.wind_speed),Rain:"number"===typeof e.rain?e.rain:"-",Description:e.weather[0].description[0].toUpperCase()+e.weather[0].description.slice(1),Sunrise:k(e.sunrise),Sunset:k(e.sunset)}}))};return document.getElementById("fahrenheit").checked&&(f.current=w(f.current),f.forecasted=f.forecasted.map((function(e){return w(e)}))),f}catch(b){b instanceof TypeError?console.log("Some data associated with the searched city is missing:",b):console.error("An error occured in parseData():",b)}return y}var F=r(0);function A(e){var t=e.location;function r(){return(r=Object(m.a)(p.a.mark((function e(){var t,r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:t=e.sent,r=t?E(t):y,c(r),n=f(s,r,i),o(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var a=Object(n.useContext)(H),c=a.setData,i=a.forecastedDays,s=a.filteredCategories,o=a.setFilteredData,u=Object(F.jsxs)("label",{children:[t,Object(F.jsx)("input",{type:"text",id:t.toLocaleLowerCase(),onChange:function(){var e;return function(){clearTimeout(e),e=setTimeout((function(){clearTimeout(e),function(){r.apply(this,arguments)}()}),2e3)}}(),autoFocus:"City"===t})]});return u}var N=r(9);function I(e){var t=e.table,r=e.filters;function a(e){var r=e.target,n=r.checked,a=r.parentElement,c=a.textContent,h=a.parentElement.textContent.includes("Categories"),b=Object(o.a)(a.parentElement.children);b.shift(),"deselectAll"===c?b.forEach((function(e){e.className=n?"":"input-unselected",e.firstElementChild.checked=n})):a.className=n?"":"input-unselected",h?(l[t]=function(e,t,r){if("deselectAll"===t)for(var n in e)e[n]=!!r;else e[t]=r;return e}(l[t],c,n),d(Object(O.a)(Object(O.a)({},l),{},Object(N.a)({},t,l[t])))):(s=function(e,t,r,n){var a;return"deselectAll"!==e?(t.forEach((function(r){a=r.textContent===e?t.indexOf(r):a})),r=r.includes(a)?r.filter((function(e){return e!==a})):[a].concat(Object(o.a)(r)).sort()):r=n?x:[],r}(c,b,s,n),u(s));var p=f(l,i,s);j(p)}var c=Object(n.useContext)(H),i=c.data,s=c.forecastedDays,u=c.setForecastedDays,l=c.filteredCategories,d=c.setFilteredCategories,j=c.setFilteredData;return r.map((function(e){return Object(F.jsxs)("label",{children:[isNaN(e)&&e||i.forecasted[e].Date||"Day "+(e+1),Object(F.jsx)("input",{type:"checkbox",onChange:a,defaultChecked:!0})]},e.toString())}))}function W(){function e(){var e=document.getElementById("celsius"),t=document.getElementById("fahrenheit");if(e.parentElement.className=e.checked?"input-selected":"input-unselected",t.parentElement.className=t.checked?"input-selected":"input-unselected",JSON.stringify(r)!==JSON.stringify(y)){var n=t.checked;r.current=w(r.current,n),r.forecasted=r.forecasted.map((function(e){return w(e,n)}))}var s=f(c,r,a);i(s)}var t=Object(n.useContext)(H),r=t.data,a=t.forecastedDays,c=t.filteredCategories,i=t.setFilteredData;return["Celsius","Fahrenheit"].map((function(t){return Object(F.jsxs)("label",{children:[t,Object(F.jsx)("input",{type:"radio",id:t.toLocaleLowerCase(),name:"temp",onChange:e,defaultChecked:"Celsius"===t})]},t)}))}function B(){var e=Object(n.useContext)(H),t=e.data,r=e.forecastedDays;return Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:" "}),r.map((function(e){var r=t.forecasted[e].Date||"Day "+(e+1);return r=r.split(" "),Object(F.jsxs)("th",{children:[r[0],Object(F.jsx)("br",{}),r[1]]},e.toString())}))]})})}function L(e){var t=e.tableContent,r=Object.entries(t).map((function(e){var t=Object(s.a)(e,2),r=t[0],n=t[1];return Object(F.jsxs)("tr",{className:["Date","Time"].includes(r)?"time-row":"",children:[Object(F.jsx)("th",{scope:"row",children:r}),Array.isArray(n)&&Array.from(n,(function(e,t){return Object(F.jsx)("td",{children:e},t.toString())}))||Object(F.jsx)("td",{children:n})]},r)}));return Object(F.jsx)("tbody",{children:r})}function M(){var e=Object(n.useContext)(H),t=e.data,r=e.filteredData;return[["Location",t.location],["Current Weather",r.current],["8 Day Forecast",r.forecasted]].map((function(e){var t=Object(s.a)(e,2),r=t[0],n=t[1];return Object(F.jsxs)("table",{children:[Object(F.jsx)("caption",{children:r}),r.includes("8")&&Object(F.jsx)(B,{}),Object(F.jsx)(L,{tableContent:n}),r.includes("8")&&Object(F.jsx)("tfoot",{children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{children:"* Data provided by OpenWeather API"})})})]},r)}))}var q=function(e){Object(d.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(l.a)(r,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0}),console.error("An error occured:",e)}},{key:"render",value:function(){return this.state.hasError&&Object(F.jsx)("h1",{children:"An error has occured"})||this.props.children}}]),r}(a.a.Component),H=a.a.createContext();function R(){var e=Object.keys(v);return[Object(F.jsxs)("fieldset",{children:[Object(F.jsx)("legend",{children:"Temperature Units"}),Object(F.jsx)(W,{})]},"1"),Object(F.jsxs)("fieldset",{children:[Object(F.jsx)("legend",{children:'"Current Weather" Categories'}),Object(F.jsx)(I,{table:"current",filters:["Date","Time"].concat(Object(o.a)(e))},"2")]},"2"),Object(F.jsxs)("fieldset",{children:[Object(F.jsx)("legend",{children:'"8 Day Forecast" Categories'}),Object(F.jsx)(I,{table:"forecasted",filters:e},"3")]},"3"),Object(F.jsxs)("fieldset",{children:[Object(F.jsx)("legend",{children:'"8 Day Forecast" Days'}),Object(F.jsx)(I,{table:"forecasted",filters:[].concat(Object(o.a)(x),["deselectAll"])},"4")]},"4")]}function J(){var e=Object(n.useState)(y),t=Object(s.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(x),i=Object(s.a)(c,2),o=i[0],u=i[1],l=Object(n.useState)(C),d=Object(s.a)(l,2),j=d[0],h=d[1],b=f(C,r,o),p=Object(n.useState)(b),m=Object(s.a)(p,2),O=m[0],v=m[1];return Object(F.jsx)(q,{children:Object(F.jsxs)(H.Provider,{value:{data:r,setData:a,filteredCategories:j,setFilteredCategories:h,forecastedDays:o,setForecastedDays:u,filteredData:O,setFilteredData:v},children:[Object(F.jsxs)("form",{children:[Object(F.jsx)(A,{location:"City"}),Object(F.jsxs)("label",{className:"filter-label",children:["Filter \u25b9",Object(F.jsx)("input",{type:"checkbox",onChange:function(e){var t=e.target,r=t.parentElement,n=t.checked;r.childNodes[0].nodeValue=n?"Filter \u25b8":"Filter \u25b9",r.nextElementSibling.className=n?"hide-filters":"filter-container"}})]}),Object(F.jsxs)("div",{className:"filter-container",children:[Object(F.jsx)(A,{location:"Country"}),Object(F.jsx)(R,{})]})]}),Object(F.jsx)("div",{className:"table-container",children:Object(F.jsx)(M,{})})]})})}var P=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,24)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))};i.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(J,{})}),document.getElementById("root")),P(console.log)}},[[23,1,2]]]);
//# sourceMappingURL=main.bbdd77fd.chunk.js.map